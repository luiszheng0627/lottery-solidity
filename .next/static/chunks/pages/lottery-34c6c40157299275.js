(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{6913:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lottery",function(){return t(13587)}])},24046:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(85893),a=(t(67294),t(95712)),i=t(9008),s=t(63272),c=t(96215);function o(){return(0,r.jsxs)(s.Z,{style:{marginTop:"10px"},children:[(0,r.jsx)(c.Link,{route:"/",children:(0,r.jsx)("a",{className:"item",children:"My Test"})}),(0,r.jsxs)(s.Z.Menu,{position:"right",children:[(0,r.jsx)(c.Link,{route:"/lottery",children:(0,r.jsx)("a",{className:"item",children:"Lottery"})}),(0,r.jsx)(c.Link,{route:"/campaigns",children:(0,r.jsx)("a",{className:"item",children:"Campaigns"})}),(0,r.jsx)(c.Link,{route:"/campaigns/new",children:(0,r.jsx)("a",{className:"item",children:"+"})})]})]})}function u(e){var n=e.children;return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(i.default,{children:(0,r.jsx)("link",{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.12/semantic.min.css"})}),(0,r.jsx)(o,{}),n]})}},13587:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var r=t(35666),a=t.n(r),i=t(85893),s=t(67294),c=t(68577),o=t(96486),u=t.n(o),l=t(29745),d=t(86010),p=(t(45697),t(98459)),f=t(28935),h=t(12519),m=t(92248);function v(e){var n=e.children,t=e.className,r=e.clearing,a=e.content,i=e.fitted,c=e.hidden,o=e.horizontal,u=e.inverted,x=e.section,y=e.vertical,g=(0,d.Z)("ui",(0,p.lG)(r,"clearing"),(0,p.lG)(i,"fitted"),(0,p.lG)(c,"hidden"),(0,p.lG)(o,"horizontal"),(0,p.lG)(u,"inverted"),(0,p.lG)(x,"section"),(0,p.lG)(y,"vertical"),"divider",t),b=(0,f.Z)(v,e),j=(0,h.Z)(v,e);return s.createElement(j,(0,l.Z)({},b,{className:g}),m.kK(n)?a:n)}v.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],v.propTypes={};var x=v,y=t(95712),g=t(60416),b=t(80967),j=t(24046),Z=t(31866);function w(e,n,t,r,a,i,s){try{var c=e[i](s),o=c.value}catch(u){return void t(u)}c.done?n(o):Promise.resolve(o).then(r,a)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function s(e){w(i,r,a,s,c,"next",e)}function c(e){w(i,r,a,s,c,"throw",e)}s(void 0)}))}}function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(t.push(s.value),!n||t.length!==n);r=!0);}catch(o){a=!0,i=o}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(e){var n=(0,s.useContext)(Z.t),t=n.web3,r=n.lotterySC,o=(0,c.G)(k(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u().isEmpty(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.eth.getAccounts();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),[t],[]),l=(0,c.G)(k(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u().isEmpty(r)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,r.methods.manager().call();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),[r]),d=(0,s.useState)([]),p=d[0],f=d[1],h=(0,s.useState)(""),m=h[0],v=h[1],w=(0,s.useState)(""),C=w[0],E=w[1],P=(0,s.useState)(""),N=P[0],_=P[1];(0,s.useEffect)((function(){u().isEmpty(r)||u().isEmpty(o)||Promise.all([r.methods.getPlayers().call(),t.eth.getBalance(r.options.address)]).then((function(e){var n=G(e,2),t=n[0],r=n[1];f(t),v(r)}))}),[r,o]);var T=(0,s.useCallback)(k(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),_("Waiting on transaction success..."),e.next=4,r.methods.enter().send({from:o[0],value:t.utils.toWei(C,"ether")});case 4:_("You have been entered!");case 5:case"end":return e.stop()}}),e)})))),I=(0,s.useCallback)(k(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _("Waiting on transaction success..."),e.next=3,r.methods.pickWinner().send({from:o[0]});case 3:_("A winner has been picked!");case 4:case"end":return e.stop()}}),e)}))));return u().isEmpty(r)||u().isEmpty(l)||u().isEmpty(o)?(0,i.jsx)("div",{children:"Loading Web3, accounts, and contract..."}):(0,i.jsx)(j.Z,{children:(0,i.jsx)("div",{className:"card p-4",children:(0,i.jsxs)(y.Z,{className:"card-container purple-container",header:"Lottery",children:[(0,i.jsx)("h1",{children:"Lottery Contract"}),(0,i.jsxs)("p",{children:["Contract Manager: ",l]}),(0,i.jsxs)("p",{children:["Current players: ",p.length]}),(0,i.jsxs)("p",{children:["Total Balance: ",t.utils.fromWei(m,"ether")," ether"]}),(0,i.jsx)(x,{type:"dashed"}),(0,i.jsxs)("form",{onSubmit:T,children:[(0,i.jsx)("h4",{children:"Want to try your luck?"}),(0,i.jsx)(g.Z,{fluid:!0,action:"Enter",placeholder:"Amount of ether to enter",onChange:function(e){return E(e.target.value)}})]}),(0,i.jsx)(x,{type:"dashed"}),(0,i.jsx)("h4",{children:"Ready to pick winner?"}),(0,i.jsx)(b.Z,{onClick:I,label:"Pick a winner"}),(0,i.jsx)(x,{}),(0,i.jsx)("h4",{children:N})]})})})}},96215:function(e,n,t){"use strict";var r=t(37018)();r.add("/campaigns/new","/campaigns/new").add("/campaigns/:address","/campaigns/show").add("/campaigns/:address/requests","/campaigns/requests/index").add("/campaigns/:address/requests/new","/campaigns/requests/new"),e.exports=r},60416:function(e,n,t){"use strict";var r=t(29745),a=t(23671),i=t(19658),s=t(13871),c=t(18232),o=t(16423),u=t(27601),l=t(34714),d=t(86010),p=(t(45697),t(67294)),f=t(28935),h=t(13092),m=t(98459),v=t(12519),x=t(92248),y=t(69591),g=t(80967),b=t(45150),j=t(25142),Z=function(e){function n(){for(var t,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).inputRef=(0,p.createRef)(),t.computeIcon=function(){var e=t.props,n=e.loading,r=e.icon;return(0,u.Z)(r)?n?"spinner":void 0:r},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return(0,u.Z)(r)?n?-1:void 0:r},t.focus=function(){return t.inputRef.current.focus()},t.select=function(){return t.inputRef.current.select()},t.handleChange=function(e){var n=(0,o.Z)(e,"target.value");(0,c.Z)(t.props,"onChange",e,(0,r.Z)({},t.props,{value:n}))},t.handleChildOverrides=function(e,n){return(0,r.Z)({},n,e.props,{ref:function(n){(0,l.n)(e.ref,n),t.inputRef.current=n}})},t.partitionProps=function(){var e=t.props,a=e.disabled,i=e.type,s=t.computeTabIndex(),c=(0,f.Z)(n,t.props),o=(0,h.vR)(c),u=o[0],l=o[1];return[(0,r.Z)({},u,{disabled:a,type:i,tabIndex:s,onChange:t.handleChange,ref:t.inputRef}),l]},t}return(0,a.Z)(n,e),n.prototype.render=function(){var e=this,t=this.props,a=t.action,c=t.actionPosition,o=t.children,u=t.className,l=t.disabled,f=t.error,h=t.fluid,Z=t.focus,w=t.icon,k=t.iconPosition,G=t.input,C=t.inverted,E=t.label,P=t.labelPosition,N=t.loading,_=t.size,T=t.transparent,I=t.type,L=(0,d.Z)("ui",_,(0,m.lG)(l,"disabled"),(0,m.lG)(f,"error"),(0,m.lG)(h,"fluid"),(0,m.lG)(Z,"focus"),(0,m.lG)(C,"inverted"),(0,m.lG)(N,"loading"),(0,m.lG)(T,"transparent"),(0,m.cD)(c,"action")||(0,m.lG)(a,"action"),(0,m.cD)(k,"icon")||(0,m.lG)(w||N,"icon"),(0,m.cD)(P,"labeled")||(0,m.lG)(E,"labeled"),"input",u),R=(0,v.Z)(n,this.props),S=this.partitionProps(),A=S[0],W=S[1];if(!x.kK(o)){var K=(0,s.Z)(p.Children.toArray(o),(function(n){return"input"!==n.type?n:(0,p.cloneElement)(n,e.handleChildOverrides(n,A))}));return p.createElement(R,(0,r.Z)({},W,{className:L}),K)}var z=g.Z.create(a,{autoGenerateKey:!1}),O=j.Z.create(E,{defaultProps:{className:(0,d.Z)("label",(0,i.Z)(P,"corner")&&P)},autoGenerateKey:!1});return p.createElement(R,(0,r.Z)({},W,{className:L}),"left"===c&&z,"right"!==P&&O,(0,y.MO)(G||I,{defaultProps:A,autoGenerateKey:!1}),b.Z.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==c&&z,"right"===P&&O)},n}(p.Component);Z.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],Z.propTypes={},Z.defaultProps={type:"text"},Z.create=(0,y.u5)(Z,(function(e){return{type:e}})),n.Z=Z},68577:function(e,n,t){"use strict";var r=t(67294);n.G=function(e,n,t){void 0===t&&(t=void 0);var a=r.useState(t),i=a[0],s=a[1];return r.useEffect((function(){var n=!1,t=e();if(void 0!==t&&null!==t)return t.then((function(e){n||s(e)})),function(){n=!0}}),n),i}}},function(e){e.O(0,[774,662,809,888,179],(function(){return n=6913,e(e.s=n);var n}));var n=e.O();_N_E=n}]);