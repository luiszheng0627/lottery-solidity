(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(75563)}])},75563:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return $}});var n=r(35666),s=r.n(n),a=r(85893),o=r(67294),i=r(29745),l=r(13871),c=r(86010),u=(r(45697),r(98459)),d=r(28935),p=r(12519),f=r(92248);function h(e){var t=e.children,r=e.className,n=(0,c.Z)(r),s=(0,d.Z)(h,e),a=(0,p.Z)(h,e);return o.createElement(a,(0,i.Z)({},s,{className:n}),t)}h.handledProps=["as","children","className"],h.defaultProps={as:"tbody"},h.propTypes={};var v=h,m=r(69591),b=r(45150);function y(e){var t=e.active,r=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,h=e.error,v=e.icon,m=e.negative,w=e.positive,g=e.selectable,x=e.singleLine,j=e.textAlign,Z=e.verticalAlign,P=e.warning,k=e.width,G=(0,c.Z)((0,u.lG)(t,"active"),(0,u.lG)(s,"collapsing"),(0,u.lG)(l,"disabled"),(0,u.lG)(h,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(w,"positive"),(0,u.lG)(g,"selectable"),(0,u.lG)(x,"single line"),(0,u.lG)(P,"warning"),(0,u.X4)(j),(0,u.Ok)(Z),(0,u.H0)(k,"wide"),n),_=(0,d.Z)(y,e),A=(0,p.Z)(y,e);return f.kK(r)?o.createElement(A,(0,i.Z)({},_,{className:G}),b.Z.create(v),a):o.createElement(A,(0,i.Z)({},_,{className:G}),r)}y.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],y.defaultProps={as:"td"},y.propTypes={},y.create=(0,m.u5)(y,(function(e){return{content:e}}));var w=y;function g(e){var t=e.children,r=e.className,n=e.content,s=e.fullWidth,a=(0,c.Z)((0,u.lG)(s,"full-width"),r),l=(0,d.Z)(g,e),h=(0,p.Z)(g,e);return o.createElement(h,(0,i.Z)({},l,{className:a}),f.kK(t)?n:t)}g.handledProps=["as","children","className","content","fullWidth"],g.defaultProps={as:"thead"},g.propTypes={};var x=g;function j(e){var t=e.as,r=(0,d.Z)(j,e);return o.createElement(x,(0,i.Z)({},r,{as:t}))}j.handledProps=["as"],j.propTypes={},j.defaultProps={as:"tfoot"};var Z=j;function P(e){var t=e.as,r=e.className,n=e.sorted,s=(0,c.Z)((0,u.cD)(n,"sorted"),r),a=(0,d.Z)(P,e);return o.createElement(w,(0,i.Z)({},a,{as:t,className:s}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var k=P;function G(e){var t=e.active,r=e.cellAs,n=e.cells,s=e.children,a=e.className,h=e.disabled,v=e.error,m=e.negative,b=e.positive,y=e.textAlign,g=e.verticalAlign,x=e.warning,j=(0,c.Z)((0,u.lG)(t,"active"),(0,u.lG)(h,"disabled"),(0,u.lG)(v,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(b,"positive"),(0,u.lG)(x,"warning"),(0,u.X4)(y),(0,u.Ok)(g),a),Z=(0,d.Z)(G,e),P=(0,p.Z)(G,e);return f.kK(s)?o.createElement(P,(0,i.Z)({},Z,{className:j}),(0,l.Z)(n,(function(e){return w.create(e,{defaultProps:{as:r}})}))):o.createElement(P,(0,i.Z)({},Z,{className:j}),s)}G.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],G.defaultProps={as:"tr",cellAs:"td"},G.propTypes={},G.create=(0,m.u5)(G,(function(e){return{cells:e}}));var _=G;function A(e){var t=e.attached,r=e.basic,n=e.celled,s=e.children,a=e.className,h=e.collapsing,m=e.color,b=e.columns,y=e.compact,w=e.definition,g=e.fixed,j=e.footerRow,P=e.headerRow,k=e.headerRows,G=e.inverted,N=e.padded,O=e.renderBodyRow,E=e.selectable,C=e.singleLine,R=e.size,q=e.sortable,T=e.stackable,z=e.striped,F=e.structured,H=e.tableData,S=e.textAlign,B=e.unstackable,D=e.verticalAlign,L=(0,c.Z)("ui",m,R,(0,u.lG)(n,"celled"),(0,u.lG)(h,"collapsing"),(0,u.lG)(w,"definition"),(0,u.lG)(g,"fixed"),(0,u.lG)(G,"inverted"),(0,u.lG)(E,"selectable"),(0,u.lG)(C,"single line"),(0,u.lG)(q,"sortable"),(0,u.lG)(T,"stackable"),(0,u.lG)(z,"striped"),(0,u.lG)(F,"structured"),(0,u.lG)(B,"unstackable"),(0,u.sU)(t,"attached"),(0,u.sU)(r,"basic"),(0,u.sU)(y,"compact"),(0,u.sU)(N,"padded"),(0,u.X4)(S),(0,u.Ok)(D),(0,u.H0)(b,"column"),"table",a),X=(0,d.Z)(A,e),K=(0,p.Z)(A,e);if(!f.kK(s))return o.createElement(K,(0,i.Z)({},X,{className:L}),s);var U={defaultProps:{cellAs:"th"}},I=(P||k)&&o.createElement(x,null,_.create(P,U),(0,l.Z)(k,(function(e){return _.create(e,U)})));return o.createElement(K,(0,i.Z)({},X,{className:L}),I,o.createElement(v,null,O&&(0,l.Z)(H,(function(e,t){return _.create(O(e,t))}))),j&&o.createElement(Z,null,_.create(j)))}A.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],A.defaultProps={as:"table"},A.propTypes={},A.Body=v,A.Cell=w,A.Footer=Z,A.Header=x,A.HeaderCell=k,A.Row=_;var N=A,O=r(80967),E=r(96215),C=r(24046),R=r(92970),q=r(33641);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,s)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){z(a,n,s,o,i,"next",e)}function i(e){z(a,n,s,o,i,"throw",e)}o(void 0)}))}}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?T(e):t}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},U=function(e){function t(){var e;return H(this,t),B(T(e=L(this,D(t).apply(this,arguments))),"onApprove",F(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.approveRequest(this.props.id).send({from:r[0]});case 6:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),B(T(e),"onFinalize",F(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.finalizeRequest(this.props.id).send({from:r[0]});case 6:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),e}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=N.Row,t=N.Cell,r=this.props,n=r.id,s=r.request,o=r.approversCount,i=s.approvalCount>o/2;return(0,a.jsxs)(e,{disabled:s.complete,positive:i&&!s.complete,children:[(0,a.jsx)(t,{children:n}),(0,a.jsx)(t,{children:s.description}),(0,a.jsx)(t,{children:q.Z.utils.fromWei(s.value,"ether")}),(0,a.jsx)(t,{children:s.recipient}),(0,a.jsxs)(t,{children:[s.approvalCount,"/",o]}),(0,a.jsx)(t,{children:s.complete?null:(0,a.jsx)(O.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,a.jsx)(t,{children:s.complete?null:(0,a.jsx)(O.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})}}])&&S(r.prototype,n),o&&S(r,o),t}(o.Component);function I(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(c){return void r(c)}i.done?t(l):Promise.resolve(l).then(n,s)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},$=function(e){function t(){return W(this,t),Q(this,M(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),r=t,o=[{key:"getInitialProps",value:function(e){return(t=s().mark((function t(){var r,n,a,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query.address,n=R(r),t.next=4,n.methods.getRequestsCount().call();case 4:return a=t.sent,t.next=7,n.methods.approversCount().call();case 7:return o=t.sent,t.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return i=t.sent,t.abrupt("return",{address:r,requests:i,requestCount:a,approversCount:o});case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,s){var a=t.apply(e,r);function o(e){I(a,n,s,o,i,"next",e)}function i(e){I(a,n,s,o,i,"throw",e)}o(void 0)}))})();var t}}],(n=[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,a.jsx)(U,{id:r,request:t,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=N.Header,t=N.Row,r=N.HeaderCell,n=N.Body;return(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("h3",{children:"Requests"}),(0,a.jsx)(E.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(O.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,a.jsxs)(N,{children:[(0,a.jsx)(e,{children:(0,a.jsxs)(t,{children:[(0,a.jsx)(r,{children:"ID"}),(0,a.jsx)(r,{children:"Description"}),(0,a.jsx)(r,{children:"Amount"}),(0,a.jsx)(r,{children:"Recipient"}),(0,a.jsx)(r,{children:"Approval Count"}),(0,a.jsx)(r,{children:"Approve"}),(0,a.jsx)(r,{children:"Finalize"})]})}),(0,a.jsx)(n,{children:this.renderRows()})]}),(0,a.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]})]})}}])&&J(r.prototype,n),o&&J(r,o),t}(o.Component)}},function(e){e.O(0,[774,809,649,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);